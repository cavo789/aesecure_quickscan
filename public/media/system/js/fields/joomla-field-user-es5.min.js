!function(){"use strict";function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,r=void 0,"symbol"==typeof(r=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"))?r:String(r)),i)}var o,r}function e(t){return e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},e(t)}function n(t,e){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},n(t,e)}function i(t,e,o){return i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct.bind():function(t,e,i){var o=[null];o.push.apply(o,e);var r=new(Function.bind.apply(t,o));return i&&n(r,i.prototype),r},i.apply(null,arguments)}function o(t){var r="function"==typeof Map?new Map:void 0;return o=function(t){if(null===t||(o=t,-1===Function.toString.call(o).indexOf("[native code]")))return t;var o;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,u)}function u(){return i(t,arguments,e(this).constructor)}return u.prototype=Object.create(t.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),n(u,t)},o(t)}function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}!function(e,i){var u=function(e){var o,u;function s(){var t;return(t=e.call(this)||this).onUserSelect="",t.onchangeStr="",t.buttonClick=t.buttonClick.bind(r(t)),t.iframeLoad=t.iframeLoad.bind(r(t)),t.modalClose=t.modalClose.bind(r(t)),t.setValue=t.setValue.bind(r(t)),t}u=e,(o=s).prototype=Object.create(u.prototype),o.prototype.constructor=o,n(o,u);var a,l,c,h=s.prototype;return h.connectedCallback=function(){this.modal=this.querySelector(this.modalClass),this.modalBody=this.querySelector(".modal-body"),this.input=this.querySelector(this.inputId),this.inputName=this.querySelector(this.inputNameClass),this.buttonSelect=this.querySelector(this.buttonSelectClass),this.modal&&window.bootstrap&&window.bootstrap.Modal&&!window.bootstrap.Modal.getInstance(this.modal)&&i.initialiseModal(this.modal,{isJoomla:!0}),this.buttonSelect&&(this.buttonSelect.addEventListener("click",this.modalOpen.bind(this)),this.modal.addEventListener("hide",this.removeIframe.bind(this)),this.onchangeStr=this.input.getAttribute("data-onchange"),this.onchangeStr&&(this.onUserSelect=new Function(this.onchangeStr),this.input.addEventListener("change",this.onUserSelect)))},h.disconnectedCallback=function(){this.onchangeStr&&this.input&&this.input.removeEventListener("change",this.onUserSelect),this.buttonSelect&&this.buttonSelect.removeEventListener("click",this),this.modal&&this.modal.removeEventListener("hide",this)},h.buttonClick=function(t){var e=t.target;this.setValue(e.getAttribute("data-user-value"),e.getAttribute("data-user-name")),this.modalClose()},h.iframeLoad=function(){var t=this,e=this.iframeEl.contentWindow.document;[].slice.call(e.querySelectorAll(".button-select")).forEach((function(e){e.addEventListener("click",t.buttonClick)}))},h.modalOpen=function(){this.removeIframe();var t=document.createElement("iframe");t.setAttribute("name","field-user-modal"),t.src=this.url.replace("{field-user-id}",this.input.getAttribute("id")),t.setAttribute("width",this.modalWidth),t.setAttribute("height",this.modalHeight),this.modalBody.appendChild(t),this.modal.open(),this.iframeEl=this.modalBody.querySelector("iframe"),this.iframeEl.addEventListener("load",this.iframeLoad)},h.modalClose=function(){i.Modal.getCurrent().close(),this.modalBody.innerHTML=""},h.removeIframe=function(){this.modalBody.innerHTML=""},h.setValue=function(t,e){this.input.setAttribute("value",t),this.inputName.setAttribute("value",e||t),this.input.dispatchEvent(new Event("change")),this.dispatchEvent(new CustomEvent("change",{detail:{value:t,name:e},bubbles:!0}))},a=s,c=[{key:"observedAttributes",get:function(){return["url","modal","modal-width","modal-height","input","input-name","button-select"]}}],(l=[{key:"url",get:function(){return this.getAttribute("url")},set:function(t){this.setAttribute("url",t)}},{key:"modalClass",get:function(){return this.getAttribute("modal")},set:function(t){this.setAttribute("modal",t)}},{key:"modalWidth",get:function(){return this.getAttribute("modal-width")},set:function(t){this.setAttribute("modal-width",t)}},{key:"modalHeight",get:function(){return this.getAttribute("modal-height")},set:function(t){this.setAttribute("modal-height",t)}},{key:"inputId",get:function(){return this.getAttribute("input")},set:function(t){this.setAttribute("input",t)}},{key:"inputNameClass",get:function(){return this.getAttribute("input-name")},set:function(t){this.setAttribute("input-name",t)}},{key:"buttonSelectClass",get:function(){return this.getAttribute("button-select")},set:function(t){this.setAttribute("button-select",t)}}])&&t(a.prototype,l),c&&t(a,c),Object.defineProperty(a,"prototype",{writable:!1}),s}(o(HTMLElement));e.define("joomla-field-user",u)}(customElements,Joomla)}();